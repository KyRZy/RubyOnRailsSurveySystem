<h1>Ankiety</h1>

<table class="table">
  <thead>
    <tr>
      <th>Nazwa</th>
      <th>Data rozpoczęcia</th>
      <th>Data zakończenia</th>
      <th>Czy jest publiczna?</th>
      <th>Czy jest dostępna dla wszystkich?</th>
      <th>Administrator</th>
      <th>Kategoria</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
	<% if administrator_signed_in? %>
		<% @surveys.where(:administrator_id => current_administrator.id).each do |survey| %>
		  <tr>
			<td><%= survey.name %></td>
			<td><%= survey.start_date %></td>
			<td><%= survey.end_date %></td>
			<td><%= survey.is_public %></td>
			<td><%= survey.is_available_for_all %></td>
			<td><%= survey.administrator_id %></td>
			<td><%= Category.find(survey.category_id).name %></td>
			<td><%= link_to 'Wypełnij', survey, action: :show %></td>
			<td><%= link_to 'Usuń', survey, method: :delete, data: { confirm: 'Czy jesteś pewien?' } %></td>
		  </tr>
		<% end %>
	<% else %>
		<% @surveys.each do |survey| %>
		  <tr>
			<td><%= survey.name %></td>
			<td><%= survey.start_date %></td>
			<td><%= survey.end_date %></td>
			<td><%= survey.is_public %></td>
			<td><%= survey.is_available_for_all %></td>
			<td><%= survey.administrator_id %></td>
			<td><%= Category.find(survey.category_id).name %></td>
			<td><%= link_to 'Wypełnij', survey, action: :show %></td>
		  </tr>
		<% end %>
	<% end %>
  </tbody>
</table>

<br>

<% if administrator_signed_in? %>
<%= link_to 'Utwórz nową ankietę', new_survey_path %>
<% end %>